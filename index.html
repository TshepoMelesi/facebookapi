<!DOCTYPE html>
<html>
        <head>
                <title>Facebook API</title>
                <script>
                        window.fbAsyncInit = function() {
                                FB.init({
                                        appId      : '387819764358659',
                                        cookie     : true,
                                        xfbml      : true,
                                        version    : 'v21.0'
                                });
                                
                                FB.AppEvents.logPageView();   
                        };
                
                        (function(d, s, id){
                        var js, fjs = d.getElementsByTagName(s)[0];
                        if (d.getElementById(id)) {return;}
                        js = d.createElement(s); js.id = id;
                        js.src = "https://connect.facebook.net/en_US/sdk.js";
                        fjs.parentNode.insertBefore(js, fjs);
                        }(document, 'script', 'facebook-jssdk'));


                        function checkLoginState(){
                                FB.getLoginStatus(function(response){
                                        statusChangeCallback(response)
                                })
                        }

                        function statusChangeCallback(response){
                                if(response.status === "connected"){
                                        console.log("logged in and authenticated")

                                        fetchUserProfile()
                                } else{
                                        console.log("not authenticated")
                                }
                        }

                        function fetchUserProfile(){
                                FB.api("/me", {fields : "name, email"}),
                                function(response){
                                        console.log("Successful login for: " + response.name)
                                        console.log(response)
                                }
                        }

                        FB.api(
                                "/me", 
                                {fields : "id, name, email"},
                                function(response){
                                        console.log("user data: ", response)
                                })
                </script>
        </head>

        <body>
                <h1>Facebook API</h1>

                <div 
                        class="fb-login-button" 
                        data-width=" " 
                        data-size="large"
                        data-button-type="continue_width"
                        data-layout="default"
                        data-logout-link="true"
                        data-user-continue-as="true"
                        scope="public_profile, email"></div>
        
        </body>
</html>